{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n/**\n * Represents vertex bound to range\n */\n\n\nexport var RangeVertex = /*#__PURE__*/function () {\n  function RangeVertex(range) {\n    _classCallCheck(this, RangeVertex);\n\n    this.range = range;\n    this.functionCache = new Map();\n    this.criterionFunctionCache = new Map();\n    this.dependentCacheRanges = new Set();\n    this.bruteForce = false;\n  }\n\n  _createClass(RangeVertex, [{\n    key: \"start\",\n    get: function get() {\n      return this.range.start;\n    }\n  }, {\n    key: \"end\",\n    get: function get() {\n      return this.range.end;\n    }\n  }, {\n    key: \"sheet\",\n    get: function get() {\n      return this.range.start.sheet;\n    }\n    /**\n     * Returns cached value stored for given function\n     *\n     * @param functionName - name of the function\n     */\n\n  }, {\n    key: \"getFunctionValue\",\n    value: function getFunctionValue(functionName) {\n      return this.functionCache.get(functionName) || null;\n    }\n    /**\n     * Stores cached value for given function\n     *\n     * @param functionName - name of the function\n     * @param value - cached value\n     */\n\n  }, {\n    key: \"setFunctionValue\",\n    value: function setFunctionValue(functionName, value) {\n      this.functionCache.set(functionName, value);\n    }\n    /**\n     * Returns cached value for given cache key and criterion text representation\n     *\n     * @param cacheKey - key to retrieve from the cache\n     * @param criterionString - criterion text (ex. '<=5')\n     */\n\n  }, {\n    key: \"getCriterionFunctionValue\",\n    value: function getCriterionFunctionValue(cacheKey, criterionString) {\n      var values = this.getCriterionFunctionValues(cacheKey);\n      var value = values.get(criterionString);\n      return value ? value[0] : null;\n    }\n    /**\n     * Returns all cached values stored for given criterion function\n     *\n     * @param cacheKey - key to retrieve from the cache\n     */\n\n  }, {\n    key: \"getCriterionFunctionValues\",\n    value: function getCriterionFunctionValues(cacheKey) {\n      return this.criterionFunctionCache.get(cacheKey) || new Map();\n    }\n    /**\n     * Stores all values for given criterion function\n     *\n     * @param cacheKey - key to store in the cache\n     * @param values - map with values\n     */\n\n  }, {\n    key: \"setCriterionFunctionValues\",\n    value: function setCriterionFunctionValues(cacheKey, values) {\n      this.criterionFunctionCache.set(cacheKey, values);\n    }\n  }, {\n    key: \"addDependentCacheRange\",\n    value: function addDependentCacheRange(dependentRange) {\n      if (dependentRange !== this) {\n        this.dependentCacheRanges.add(dependentRange);\n      }\n    }\n    /**\n     * Clears function cache\n     */\n\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      this.functionCache.clear();\n      this.criterionFunctionCache.clear();\n      this.dependentCacheRanges.forEach(function (range) {\n        return range.criterionFunctionCache.clear();\n      });\n      this.dependentCacheRanges.clear();\n    }\n    /**\n     * Returns start of the range (it's top-left corner)\n     */\n\n  }, {\n    key: \"getStart\",\n    value: function getStart() {\n      return this.start;\n    }\n    /**\n     * Returns end of the range (it's bottom-right corner)\n     */\n\n  }, {\n    key: \"getEnd\",\n    value: function getEnd() {\n      return this.end;\n    }\n  }]);\n\n  return RangeVertex;\n}();","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/DependencyGraph/RangeVertex.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","RangeVertex","range","functionCache","Map","criterionFunctionCache","dependentCacheRanges","Set","bruteForce","get","start","end","sheet","value","getFunctionValue","functionName","setFunctionValue","set","getCriterionFunctionValue","cacheKey","criterionString","values","getCriterionFunctionValues","setCriterionFunctionValues","addDependentCacheRange","dependentRange","add","clearCache","clear","forEach","getStart","getEnd"],"mappings":"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","sourcesContent":["import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n/**\n * Represents vertex bound to range\n */\nexport var RangeVertex = /*#__PURE__*/function () {\n  function RangeVertex(range) {\n    _classCallCheck(this, RangeVertex);\n\n    this.range = range;\n    this.functionCache = new Map();\n    this.criterionFunctionCache = new Map();\n    this.dependentCacheRanges = new Set();\n    this.bruteForce = false;\n  }\n\n  _createClass(RangeVertex, [{\n    key: \"start\",\n    get: function get() {\n      return this.range.start;\n    }\n  }, {\n    key: \"end\",\n    get: function get() {\n      return this.range.end;\n    }\n  }, {\n    key: \"sheet\",\n    get: function get() {\n      return this.range.start.sheet;\n    }\n    /**\n     * Returns cached value stored for given function\n     *\n     * @param functionName - name of the function\n     */\n\n  }, {\n    key: \"getFunctionValue\",\n    value: function getFunctionValue(functionName) {\n      return this.functionCache.get(functionName) || null;\n    }\n    /**\n     * Stores cached value for given function\n     *\n     * @param functionName - name of the function\n     * @param value - cached value\n     */\n\n  }, {\n    key: \"setFunctionValue\",\n    value: function setFunctionValue(functionName, value) {\n      this.functionCache.set(functionName, value);\n    }\n    /**\n     * Returns cached value for given cache key and criterion text representation\n     *\n     * @param cacheKey - key to retrieve from the cache\n     * @param criterionString - criterion text (ex. '<=5')\n     */\n\n  }, {\n    key: \"getCriterionFunctionValue\",\n    value: function getCriterionFunctionValue(cacheKey, criterionString) {\n      var values = this.getCriterionFunctionValues(cacheKey);\n      var value = values.get(criterionString);\n      return value ? value[0] : null;\n    }\n    /**\n     * Returns all cached values stored for given criterion function\n     *\n     * @param cacheKey - key to retrieve from the cache\n     */\n\n  }, {\n    key: \"getCriterionFunctionValues\",\n    value: function getCriterionFunctionValues(cacheKey) {\n      return this.criterionFunctionCache.get(cacheKey) || new Map();\n    }\n    /**\n     * Stores all values for given criterion function\n     *\n     * @param cacheKey - key to store in the cache\n     * @param values - map with values\n     */\n\n  }, {\n    key: \"setCriterionFunctionValues\",\n    value: function setCriterionFunctionValues(cacheKey, values) {\n      this.criterionFunctionCache.set(cacheKey, values);\n    }\n  }, {\n    key: \"addDependentCacheRange\",\n    value: function addDependentCacheRange(dependentRange) {\n      if (dependentRange !== this) {\n        this.dependentCacheRanges.add(dependentRange);\n      }\n    }\n    /**\n     * Clears function cache\n     */\n\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      this.functionCache.clear();\n      this.criterionFunctionCache.clear();\n      this.dependentCacheRanges.forEach(function (range) {\n        return range.criterionFunctionCache.clear();\n      });\n      this.dependentCacheRanges.clear();\n    }\n    /**\n     * Returns start of the range (it's top-left corner)\n     */\n\n  }, {\n    key: \"getStart\",\n    value: function getStart() {\n      return this.start;\n    }\n    /**\n     * Returns end of the range (it's bottom-right corner)\n     */\n\n  }, {\n    key: \"getEnd\",\n    value: function getEnd() {\n      return this.end;\n    }\n  }]);\n\n  return RangeVertex;\n}();"]},"metadata":{},"sourceType":"module"}