{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n\nimport { DateNumber, DateTimeNumber, TimeNumber } from './interpreter/InterpreterValue';\nvar numDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar prefSumDays = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\nexport function instanceOfSimpleDate(obj) {\n  if (obj && (_typeof(obj) === 'object' || typeof obj === 'function')) {\n    return 'year' in obj && typeof obj.year === 'number' && 'month' in obj && typeof obj.month === 'number' && 'day' in obj && typeof obj.day === 'number';\n  } else {\n    return false;\n  }\n}\nexport function instanceOfSimpleTime(obj) {\n  if (obj && (_typeof(obj) === 'object' || typeof obj === 'function')) {\n    return 'hours' in obj && typeof obj.hours === 'number' && 'minutes' in obj && typeof obj.minutes === 'number' && 'seconds' in obj && typeof obj.seconds === 'number';\n  } else {\n    return false;\n  }\n}\nexport var maxDate = {\n  year: 9999,\n  month: 12,\n  day: 31\n};\nexport var DateTimeHelper = /*#__PURE__*/function () {\n  function DateTimeHelper(config) {\n    _classCallCheck(this, DateTimeHelper);\n\n    this.config = config;\n    this.minDateAboluteValue = this.dateToNumberFromZero(config.nullDate);\n    this.maxDateValue = this.dateToNumber(maxDate);\n    this.leapYear1900 = config.leapYear1900; // code below fixes epochYearStart while being leapYear1900 sensitive\n    // if nullDate is earlier than fateful 28 Feb 1900 and 1900 is not supposed to be leap year, then we should\n    // add two days (this is the config default)\n    // otherwise only one day\n\n    if (!this.leapYear1900 && 0 <= this.dateToNumber({\n      year: 1900,\n      month: 2,\n      day: 28\n    })) {\n      this.epochYearZero = this.numberToSimpleDate(2).year;\n    } else {\n      this.epochYearZero = this.numberToSimpleDate(1).year;\n    }\n\n    this.parseDateTime = config.parseDateTime;\n  }\n\n  _createClass(DateTimeHelper, [{\n    key: \"getWithinBounds\",\n    value: function getWithinBounds(dayNumber) {\n      return dayNumber <= this.maxDateValue && dayNumber >= 0 ? dayNumber : undefined;\n    }\n  }, {\n    key: \"dateStringToDateNumber\",\n    value: function dateStringToDateNumber(dateTimeString) {\n      var _this$parseDateTimeFr = this.parseDateTimeFromConfigFormats(dateTimeString),\n          dateTime = _this$parseDateTimeFr.dateTime,\n          _this$parseDateTimeFr2 = _this$parseDateTimeFr.dateFormat,\n          dateFormat = _this$parseDateTimeFr2 === void 0 ? '' : _this$parseDateTimeFr2,\n          _this$parseDateTimeFr3 = _this$parseDateTimeFr.timeFormat,\n          timeFormat = _this$parseDateTimeFr3 === void 0 ? '' : _this$parseDateTimeFr3;\n\n      if (dateTime === undefined) {\n        return undefined;\n      }\n\n      if (instanceOfSimpleTime(dateTime)) {\n        if (instanceOfSimpleDate(dateTime)) {\n          return new DateTimeNumber(timeToNumber(dateTime) + this.dateToNumber(dateTime), dateFormat + ' ' + timeFormat);\n        } else {\n          return new TimeNumber(timeToNumber(dateTime), timeFormat);\n        }\n      } else {\n        if (instanceOfSimpleDate(dateTime)) {\n          return new DateNumber(this.dateToNumber(dateTime), dateFormat);\n        } else {\n          return 0;\n        }\n      }\n    }\n  }, {\n    key: \"parseSingleFormat\",\n    value: function parseSingleFormat(dateString, dateFormat, timeFormat) {\n      var dateTime = this.parseDateTime(dateString, dateFormat, timeFormat);\n\n      if (instanceOfSimpleDate(dateTime)) {\n        if (dateTime.year >= 0 && dateTime.year < 100) {\n          if (dateTime.year < this.getNullYear()) {\n            dateTime.year += 2000;\n          } else {\n            dateTime.year += 1900;\n          }\n        }\n\n        if (!this.isValidDate(dateTime)) {\n          return undefined;\n        }\n      }\n\n      return dateTime;\n    }\n  }, {\n    key: \"parseDateTimeFromConfigFormats\",\n    value: function parseDateTimeFromConfigFormats(dateTimeString) {\n      return this.parseDateTimeFromFormats(dateTimeString, this.config.dateFormats, this.config.timeFormats);\n    }\n  }, {\n    key: \"parseDateTimeFromFormats\",\n    value: function parseDateTimeFromFormats(dateTimeString, dateFormats, timeFormats) {\n      var dateFormatsIterate = dateFormats.length === 0 ? [undefined] : dateFormats;\n      var timeFormatsIterate = timeFormats.length === 0 ? [undefined] : timeFormats;\n\n      var _iterator = _createForOfIteratorHelper(dateFormatsIterate),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var dateFormat = _step.value;\n\n          var _iterator2 = _createForOfIteratorHelper(timeFormatsIterate),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var timeFormat = _step2.value;\n              var dateTime = this.parseSingleFormat(dateTimeString, dateFormat, timeFormat);\n\n              if (dateTime !== undefined) {\n                return {\n                  dateTime: dateTime,\n                  timeFormat: timeFormat,\n                  dateFormat: dateFormat\n                };\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getNullYear\",\n    value: function getNullYear() {\n      return this.config.nullYear;\n    }\n  }, {\n    key: \"getEpochYearZero\",\n    value: function getEpochYearZero() {\n      return this.epochYearZero;\n    }\n  }, {\n    key: \"isValidDate\",\n    value: function isValidDate(date) {\n      if (isNaN(date.year) || isNaN(date.month) || isNaN(date.day)) {\n        return false;\n      } else if (date.day !== Math.round(date.day) || date.month !== Math.round(date.month) || date.year !== Math.round(date.year)) {\n        return false;\n      } else if (date.year < 1582) {\n        // Gregorian calendar start\n        return false;\n      } else if (date.month < 1 || date.month > 12) {\n        return false;\n      } else if (date.day < 1) {\n        return false;\n      } else if (this.isLeapYear(date.year) && date.month === 2) {\n        return date.day <= 29;\n      } else {\n        return date.day <= numDays[date.month - 1];\n      }\n    }\n  }, {\n    key: \"dateToNumber\",\n    value: function dateToNumber(date) {\n      return this.dateToNumberFromZero(date) - this.minDateAboluteValue;\n    }\n  }, {\n    key: \"relativeNumberToAbsoluteNumber\",\n    value: function relativeNumberToAbsoluteNumber(arg) {\n      return arg + this.minDateAboluteValue - (this.leapYear1900 ? 1 : 0);\n    }\n  }, {\n    key: \"numberToSimpleDate\",\n    value: function numberToSimpleDate(arg) {\n      var dateNumber = Math.floor(arg) + this.minDateAboluteValue;\n      var year = Math.floor(dateNumber / 365.2425);\n\n      if (this.dateToNumberFromZero({\n        year: year + 1,\n        month: 1,\n        day: 1\n      }) <= dateNumber) {\n        year++;\n      } else if (this.dateToNumberFromZero({\n        year: year - 1,\n        month: 1,\n        day: 1\n      }) > dateNumber) {\n        year--;\n      }\n\n      var dayOfYear = dateNumber - this.dateToNumberFromZero({\n        year: year,\n        month: 1,\n        day: 1\n      });\n      var month = dayToMonth(dayOfYear - (this.isLeapYear(year) && dayOfYear >= 59 ? 1 : 0));\n      var day = dayOfYear - prefSumDays[month] - (this.isLeapYear(year) && month > 1 ? 1 : 0);\n      return {\n        year: year,\n        month: month + 1,\n        day: day + 1\n      };\n    }\n  }, {\n    key: \"numberToSimpleDateTime\",\n    value: function numberToSimpleDateTime(arg) {\n      return Object.assign(Object.assign({}, this.numberToSimpleDate(Math.floor(arg))), numberToSimpleTime(arg % 1));\n    }\n  }, {\n    key: \"leapYearsCount\",\n    value: function leapYearsCount(year) {\n      return Math.floor(year / 4) - Math.floor(year / 100) + Math.floor(year / 400) + (this.config.leapYear1900 && year >= 1900 ? 1 : 0);\n    }\n  }, {\n    key: \"countLeapDays\",\n    value: function countLeapDays(date) {\n      if (date.month > 2 || date.month === 2 && date.day >= 29) {\n        return this.leapYearsCount(date.year);\n      } else {\n        return this.leapYearsCount(date.year - 1);\n      }\n    }\n  }, {\n    key: \"dateToNumberFromZero\",\n    value: function dateToNumberFromZero(date) {\n      return 365 * date.year + prefSumDays[date.month - 1] + date.day - 1 + (date.month <= 2 ? this.leapYearsCount(date.year - 1) : this.leapYearsCount(date.year));\n    }\n  }, {\n    key: \"isLeapYear\",\n    value: function isLeapYear(year) {\n      if (year % 4) {\n        return false;\n      } else if (year % 100) {\n        return true;\n      } else if (year % 400) {\n        return year === 1900 && this.config.leapYear1900;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"daysInMonth\",\n    value: function daysInMonth(year, month) {\n      if (this.isLeapYear(year) && month === 2) {\n        return 29;\n      } else {\n        return numDays[month - 1];\n      }\n    }\n  }, {\n    key: \"endOfMonth\",\n    value: function endOfMonth(date) {\n      return {\n        year: date.year,\n        month: date.month,\n        day: this.daysInMonth(date.year, date.month)\n      };\n    }\n  }, {\n    key: \"toBasisUS\",\n    value: function toBasisUS(start, end) {\n      if (start.day === 31) {\n        start.day = 30;\n      }\n\n      if (start.day === 30 && end.day === 31) {\n        end.day = 30;\n      }\n\n      if (start.month === 2 && start.day === this.daysInMonth(start.year, start.month)) {\n        start.day = 30;\n\n        if (end.month === 2 && end.day === this.daysInMonth(end.year, end.month)) {\n          end.day = 30;\n        }\n      }\n\n      return [start, end];\n    }\n  }, {\n    key: \"yearLengthForBasis\",\n    value: function yearLengthForBasis(start, end) {\n      if (start.year !== end.year) {\n        if (start.year + 1 !== end.year || start.month < end.month || start.month === end.month && start.day < end.day) {\n          // this is true IFF at least one year of gap between dates\n          return (this.leapYearsCount(end.year) - this.leapYearsCount(start.year - 1)) / (end.year - start.year + 1) + 365;\n        }\n\n        if (this.countLeapDays(end) !== this.countLeapDays({\n          year: start.year,\n          month: start.month,\n          day: start.day - 1\n        })) {\n          return 366;\n        } else {\n          return 365;\n        }\n      }\n\n      if (this.isLeapYear(start.year)) {\n        return 366;\n      } else {\n        return 365;\n      }\n    }\n  }]);\n\n  return DateTimeHelper;\n}();\n\nfunction dayToMonth(dayOfYear) {\n  var month = 0;\n\n  if (prefSumDays[month + 6] <= dayOfYear) {\n    month += 6;\n  }\n\n  if (prefSumDays[month + 3] <= dayOfYear) {\n    month += 3;\n  }\n\n  if (prefSumDays[month + 2] <= dayOfYear) {\n    month += 2;\n  } else if (prefSumDays[month + 1] <= dayOfYear) {\n    month += 1;\n  }\n\n  return month;\n}\n\nexport function offsetMonth(date, offset) {\n  var totalM = 12 * date.year + date.month - 1 + offset;\n  return {\n    year: Math.floor(totalM / 12),\n    month: totalM % 12 + 1,\n    day: date.day\n  };\n}\nexport function truncateDayInMonth(date) {\n  return {\n    year: date.year,\n    month: date.month,\n    day: Math.min(date.day, numDays[date.month - 1])\n  };\n}\nexport function roundToNearestSecond(arg) {\n  return Math.round(arg * 3600 * 24) / (3600 * 24);\n}\nexport function numberToSimpleTime(arg) {\n  arg = Math.round(arg * 24 * 60 * 60 * 100000) / (24 * 60 * 60 * 100000);\n  arg *= 24;\n  var hours = Math.floor(arg);\n  arg -= hours;\n  arg *= 60;\n  var minutes = Math.floor(arg);\n  arg -= minutes;\n  arg *= 60;\n  var seconds = Math.round(arg * 100000) / 100000;\n  return {\n    hours: hours,\n    minutes: minutes,\n    seconds: seconds\n  };\n}\nexport function timeToNumber(time) {\n  return ((time.seconds / 60 + time.minutes) / 60 + time.hours) / 24;\n}\nexport function toBasisEU(date) {\n  return {\n    year: date.year,\n    month: date.month,\n    day: Math.min(30, date.day)\n  };\n}","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/DateTimeHelper.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_typeof","obj","DateNumber","DateTimeNumber","TimeNumber","numDays","prefSumDays","instanceOfSimpleDate","year","month","day","instanceOfSimpleTime","hours","minutes","seconds","maxDate","DateTimeHelper","config","minDateAboluteValue","dateToNumberFromZero","nullDate","maxDateValue","dateToNumber","leapYear1900","epochYearZero","numberToSimpleDate","parseDateTime","getWithinBounds","dayNumber","undefined","dateStringToDateNumber","dateTimeString","_this$parseDateTimeFr","parseDateTimeFromConfigFormats","dateTime","_this$parseDateTimeFr2","dateFormat","_this$parseDateTimeFr3","timeFormat","timeToNumber","parseSingleFormat","dateString","getNullYear","isValidDate","parseDateTimeFromFormats","dateFormats","timeFormats","dateFormatsIterate","timeFormatsIterate","_iterator","_step","_iterator2","_step2","nullYear","getEpochYearZero","date","isNaN","Math","round","isLeapYear","relativeNumberToAbsoluteNumber","arg","dateNumber","floor","dayOfYear","dayToMonth","numberToSimpleDateTime","assign","numberToSimpleTime","leapYearsCount","countLeapDays","daysInMonth","endOfMonth","toBasisUS","start","end","yearLengthForBasis","offsetMonth","offset","totalM","truncateDayInMonth","min","roundToNearestSecond","time","toBasisEU"],"mappings":"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","sourcesContent":["import \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\nimport { DateNumber, DateTimeNumber, TimeNumber } from './interpreter/InterpreterValue';\nvar numDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar prefSumDays = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\nexport function instanceOfSimpleDate(obj) {\n  if (obj && (_typeof(obj) === 'object' || typeof obj === 'function')) {\n    return 'year' in obj && typeof obj.year === 'number' && 'month' in obj && typeof obj.month === 'number' && 'day' in obj && typeof obj.day === 'number';\n  } else {\n    return false;\n  }\n}\nexport function instanceOfSimpleTime(obj) {\n  if (obj && (_typeof(obj) === 'object' || typeof obj === 'function')) {\n    return 'hours' in obj && typeof obj.hours === 'number' && 'minutes' in obj && typeof obj.minutes === 'number' && 'seconds' in obj && typeof obj.seconds === 'number';\n  } else {\n    return false;\n  }\n}\nexport var maxDate = {\n  year: 9999,\n  month: 12,\n  day: 31\n};\nexport var DateTimeHelper = /*#__PURE__*/function () {\n  function DateTimeHelper(config) {\n    _classCallCheck(this, DateTimeHelper);\n\n    this.config = config;\n    this.minDateAboluteValue = this.dateToNumberFromZero(config.nullDate);\n    this.maxDateValue = this.dateToNumber(maxDate);\n    this.leapYear1900 = config.leapYear1900; // code below fixes epochYearStart while being leapYear1900 sensitive\n    // if nullDate is earlier than fateful 28 Feb 1900 and 1900 is not supposed to be leap year, then we should\n    // add two days (this is the config default)\n    // otherwise only one day\n\n    if (!this.leapYear1900 && 0 <= this.dateToNumber({\n      year: 1900,\n      month: 2,\n      day: 28\n    })) {\n      this.epochYearZero = this.numberToSimpleDate(2).year;\n    } else {\n      this.epochYearZero = this.numberToSimpleDate(1).year;\n    }\n\n    this.parseDateTime = config.parseDateTime;\n  }\n\n  _createClass(DateTimeHelper, [{\n    key: \"getWithinBounds\",\n    value: function getWithinBounds(dayNumber) {\n      return dayNumber <= this.maxDateValue && dayNumber >= 0 ? dayNumber : undefined;\n    }\n  }, {\n    key: \"dateStringToDateNumber\",\n    value: function dateStringToDateNumber(dateTimeString) {\n      var _this$parseDateTimeFr = this.parseDateTimeFromConfigFormats(dateTimeString),\n          dateTime = _this$parseDateTimeFr.dateTime,\n          _this$parseDateTimeFr2 = _this$parseDateTimeFr.dateFormat,\n          dateFormat = _this$parseDateTimeFr2 === void 0 ? '' : _this$parseDateTimeFr2,\n          _this$parseDateTimeFr3 = _this$parseDateTimeFr.timeFormat,\n          timeFormat = _this$parseDateTimeFr3 === void 0 ? '' : _this$parseDateTimeFr3;\n\n      if (dateTime === undefined) {\n        return undefined;\n      }\n\n      if (instanceOfSimpleTime(dateTime)) {\n        if (instanceOfSimpleDate(dateTime)) {\n          return new DateTimeNumber(timeToNumber(dateTime) + this.dateToNumber(dateTime), dateFormat + ' ' + timeFormat);\n        } else {\n          return new TimeNumber(timeToNumber(dateTime), timeFormat);\n        }\n      } else {\n        if (instanceOfSimpleDate(dateTime)) {\n          return new DateNumber(this.dateToNumber(dateTime), dateFormat);\n        } else {\n          return 0;\n        }\n      }\n    }\n  }, {\n    key: \"parseSingleFormat\",\n    value: function parseSingleFormat(dateString, dateFormat, timeFormat) {\n      var dateTime = this.parseDateTime(dateString, dateFormat, timeFormat);\n\n      if (instanceOfSimpleDate(dateTime)) {\n        if (dateTime.year >= 0 && dateTime.year < 100) {\n          if (dateTime.year < this.getNullYear()) {\n            dateTime.year += 2000;\n          } else {\n            dateTime.year += 1900;\n          }\n        }\n\n        if (!this.isValidDate(dateTime)) {\n          return undefined;\n        }\n      }\n\n      return dateTime;\n    }\n  }, {\n    key: \"parseDateTimeFromConfigFormats\",\n    value: function parseDateTimeFromConfigFormats(dateTimeString) {\n      return this.parseDateTimeFromFormats(dateTimeString, this.config.dateFormats, this.config.timeFormats);\n    }\n  }, {\n    key: \"parseDateTimeFromFormats\",\n    value: function parseDateTimeFromFormats(dateTimeString, dateFormats, timeFormats) {\n      var dateFormatsIterate = dateFormats.length === 0 ? [undefined] : dateFormats;\n      var timeFormatsIterate = timeFormats.length === 0 ? [undefined] : timeFormats;\n\n      var _iterator = _createForOfIteratorHelper(dateFormatsIterate),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var dateFormat = _step.value;\n\n          var _iterator2 = _createForOfIteratorHelper(timeFormatsIterate),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var timeFormat = _step2.value;\n              var dateTime = this.parseSingleFormat(dateTimeString, dateFormat, timeFormat);\n\n              if (dateTime !== undefined) {\n                return {\n                  dateTime: dateTime,\n                  timeFormat: timeFormat,\n                  dateFormat: dateFormat\n                };\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getNullYear\",\n    value: function getNullYear() {\n      return this.config.nullYear;\n    }\n  }, {\n    key: \"getEpochYearZero\",\n    value: function getEpochYearZero() {\n      return this.epochYearZero;\n    }\n  }, {\n    key: \"isValidDate\",\n    value: function isValidDate(date) {\n      if (isNaN(date.year) || isNaN(date.month) || isNaN(date.day)) {\n        return false;\n      } else if (date.day !== Math.round(date.day) || date.month !== Math.round(date.month) || date.year !== Math.round(date.year)) {\n        return false;\n      } else if (date.year < 1582) {\n        // Gregorian calendar start\n        return false;\n      } else if (date.month < 1 || date.month > 12) {\n        return false;\n      } else if (date.day < 1) {\n        return false;\n      } else if (this.isLeapYear(date.year) && date.month === 2) {\n        return date.day <= 29;\n      } else {\n        return date.day <= numDays[date.month - 1];\n      }\n    }\n  }, {\n    key: \"dateToNumber\",\n    value: function dateToNumber(date) {\n      return this.dateToNumberFromZero(date) - this.minDateAboluteValue;\n    }\n  }, {\n    key: \"relativeNumberToAbsoluteNumber\",\n    value: function relativeNumberToAbsoluteNumber(arg) {\n      return arg + this.minDateAboluteValue - (this.leapYear1900 ? 1 : 0);\n    }\n  }, {\n    key: \"numberToSimpleDate\",\n    value: function numberToSimpleDate(arg) {\n      var dateNumber = Math.floor(arg) + this.minDateAboluteValue;\n      var year = Math.floor(dateNumber / 365.2425);\n\n      if (this.dateToNumberFromZero({\n        year: year + 1,\n        month: 1,\n        day: 1\n      }) <= dateNumber) {\n        year++;\n      } else if (this.dateToNumberFromZero({\n        year: year - 1,\n        month: 1,\n        day: 1\n      }) > dateNumber) {\n        year--;\n      }\n\n      var dayOfYear = dateNumber - this.dateToNumberFromZero({\n        year: year,\n        month: 1,\n        day: 1\n      });\n      var month = dayToMonth(dayOfYear - (this.isLeapYear(year) && dayOfYear >= 59 ? 1 : 0));\n      var day = dayOfYear - prefSumDays[month] - (this.isLeapYear(year) && month > 1 ? 1 : 0);\n      return {\n        year: year,\n        month: month + 1,\n        day: day + 1\n      };\n    }\n  }, {\n    key: \"numberToSimpleDateTime\",\n    value: function numberToSimpleDateTime(arg) {\n      return Object.assign(Object.assign({}, this.numberToSimpleDate(Math.floor(arg))), numberToSimpleTime(arg % 1));\n    }\n  }, {\n    key: \"leapYearsCount\",\n    value: function leapYearsCount(year) {\n      return Math.floor(year / 4) - Math.floor(year / 100) + Math.floor(year / 400) + (this.config.leapYear1900 && year >= 1900 ? 1 : 0);\n    }\n  }, {\n    key: \"countLeapDays\",\n    value: function countLeapDays(date) {\n      if (date.month > 2 || date.month === 2 && date.day >= 29) {\n        return this.leapYearsCount(date.year);\n      } else {\n        return this.leapYearsCount(date.year - 1);\n      }\n    }\n  }, {\n    key: \"dateToNumberFromZero\",\n    value: function dateToNumberFromZero(date) {\n      return 365 * date.year + prefSumDays[date.month - 1] + date.day - 1 + (date.month <= 2 ? this.leapYearsCount(date.year - 1) : this.leapYearsCount(date.year));\n    }\n  }, {\n    key: \"isLeapYear\",\n    value: function isLeapYear(year) {\n      if (year % 4) {\n        return false;\n      } else if (year % 100) {\n        return true;\n      } else if (year % 400) {\n        return year === 1900 && this.config.leapYear1900;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"daysInMonth\",\n    value: function daysInMonth(year, month) {\n      if (this.isLeapYear(year) && month === 2) {\n        return 29;\n      } else {\n        return numDays[month - 1];\n      }\n    }\n  }, {\n    key: \"endOfMonth\",\n    value: function endOfMonth(date) {\n      return {\n        year: date.year,\n        month: date.month,\n        day: this.daysInMonth(date.year, date.month)\n      };\n    }\n  }, {\n    key: \"toBasisUS\",\n    value: function toBasisUS(start, end) {\n      if (start.day === 31) {\n        start.day = 30;\n      }\n\n      if (start.day === 30 && end.day === 31) {\n        end.day = 30;\n      }\n\n      if (start.month === 2 && start.day === this.daysInMonth(start.year, start.month)) {\n        start.day = 30;\n\n        if (end.month === 2 && end.day === this.daysInMonth(end.year, end.month)) {\n          end.day = 30;\n        }\n      }\n\n      return [start, end];\n    }\n  }, {\n    key: \"yearLengthForBasis\",\n    value: function yearLengthForBasis(start, end) {\n      if (start.year !== end.year) {\n        if (start.year + 1 !== end.year || start.month < end.month || start.month === end.month && start.day < end.day) {\n          // this is true IFF at least one year of gap between dates\n          return (this.leapYearsCount(end.year) - this.leapYearsCount(start.year - 1)) / (end.year - start.year + 1) + 365;\n        }\n\n        if (this.countLeapDays(end) !== this.countLeapDays({\n          year: start.year,\n          month: start.month,\n          day: start.day - 1\n        })) {\n          return 366;\n        } else {\n          return 365;\n        }\n      }\n\n      if (this.isLeapYear(start.year)) {\n        return 366;\n      } else {\n        return 365;\n      }\n    }\n  }]);\n\n  return DateTimeHelper;\n}();\n\nfunction dayToMonth(dayOfYear) {\n  var month = 0;\n\n  if (prefSumDays[month + 6] <= dayOfYear) {\n    month += 6;\n  }\n\n  if (prefSumDays[month + 3] <= dayOfYear) {\n    month += 3;\n  }\n\n  if (prefSumDays[month + 2] <= dayOfYear) {\n    month += 2;\n  } else if (prefSumDays[month + 1] <= dayOfYear) {\n    month += 1;\n  }\n\n  return month;\n}\n\nexport function offsetMonth(date, offset) {\n  var totalM = 12 * date.year + date.month - 1 + offset;\n  return {\n    year: Math.floor(totalM / 12),\n    month: totalM % 12 + 1,\n    day: date.day\n  };\n}\nexport function truncateDayInMonth(date) {\n  return {\n    year: date.year,\n    month: date.month,\n    day: Math.min(date.day, numDays[date.month - 1])\n  };\n}\nexport function roundToNearestSecond(arg) {\n  return Math.round(arg * 3600 * 24) / (3600 * 24);\n}\nexport function numberToSimpleTime(arg) {\n  arg = Math.round(arg * 24 * 60 * 60 * 100000) / (24 * 60 * 60 * 100000);\n  arg *= 24;\n  var hours = Math.floor(arg);\n  arg -= hours;\n  arg *= 60;\n  var minutes = Math.floor(arg);\n  arg -= minutes;\n  arg *= 60;\n  var seconds = Math.round(arg * 100000) / 100000;\n  return {\n    hours: hours,\n    minutes: minutes,\n    seconds: seconds\n  };\n}\nexport function timeToNumber(time) {\n  return ((time.seconds / 60 + time.minutes) / 60 + time.hours) / 24;\n}\nexport function toBasisEU(date) {\n  return {\n    year: date.year,\n    month: date.month,\n    day: Math.min(30, date.day)\n  };\n}"]},"metadata":{},"sourceType":"module"}