{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n\nimport { CellError, simpleCellAddress } from '../Cell';\nimport { EmptyValue, getRawValue } from './InterpreterValue';\n/*\n* If key exists returns first index of key element in range of sorted values\n* Otherwise returns first index of greatest element smaller than key\n* assuming sorted values in range\n* */\n\nexport function rangeLowerBound(range, key, dependencyGraph, coordinate) {\n  //IMPORTANT: this function does not normalize input strings\n  var end;\n\n  if (coordinate === 'col') {\n    end = range.effectiveEndColumn(dependencyGraph);\n  } else {\n    end = range.effectiveEndRow(dependencyGraph);\n  }\n\n  var start = range.start[coordinate];\n  var centerValueFn;\n\n  if (coordinate === 'row') {\n    centerValueFn = function centerValueFn(center) {\n      return getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, range.start.col, center)));\n    };\n  } else {\n    centerValueFn = function centerValueFn(center) {\n      return getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, center, range.start.row)));\n    };\n  }\n\n  var pos = lowerBound(centerValueFn, key, start, end);\n\n  if (_typeof(centerValueFn(pos)) !== _typeof(key)) {\n    return -1;\n  } else {\n    return pos - start;\n  }\n}\n/*\n* If key exists returns first index of key element\n* Otherwise returns first index of greatest element smaller than key\n* assuming sorted values\n* */\n\nexport function lowerBound(value, key, start, end) {\n  while (start <= end) {\n    var center = Math.floor((start + end) / 2);\n    var cmp = compare(key, value(center));\n\n    if (cmp > 0) {\n      start = center + 1;\n    } else if (cmp < 0) {\n      end = center - 1;\n    } else if (start != center) {\n      end = center;\n    } else {\n      return center;\n    }\n  }\n\n  return end;\n}\n/*\n* numbers < strings < false < true\n* */\n\nexport function compare(left, right) {\n  if (_typeof(left) === _typeof(right)) {\n    if (left === EmptyValue) {\n      return 0;\n    }\n\n    return left < right ? -1 : left > right ? 1 : 0;\n  }\n\n  if (left === EmptyValue) {\n    return -1;\n  }\n\n  if (right === EmptyValue) {\n    return 1;\n  }\n\n  if (right instanceof CellError) {\n    return -1;\n  }\n\n  if (typeof left === 'number' && typeof right === 'string') {\n    return -1;\n  }\n\n  if (typeof left === 'number' && typeof right === 'boolean') {\n    return -1;\n  }\n\n  if (typeof left === 'string' && typeof right === 'number') {\n    return 1;\n  }\n\n  if (typeof left === 'string' && typeof right === 'boolean') {\n    return -1;\n  }\n\n  return 1;\n}","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/interpreter/binarySearch.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","CellError","simpleCellAddress","EmptyValue","getRawValue","rangeLowerBound","range","key","dependencyGraph","coordinate","end","effectiveEndColumn","effectiveEndRow","start","centerValueFn","center","getCellValue","sheet","col","row","pos","lowerBound","value","Math","floor","cmp","compare","left","right"],"mappings":"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","sourcesContent":["import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\nimport { CellError, simpleCellAddress } from '../Cell';\nimport { EmptyValue, getRawValue } from './InterpreterValue';\n/*\n* If key exists returns first index of key element in range of sorted values\n* Otherwise returns first index of greatest element smaller than key\n* assuming sorted values in range\n* */\n\nexport function rangeLowerBound(range, key, dependencyGraph, coordinate) {\n  //IMPORTANT: this function does not normalize input strings\n  var end;\n\n  if (coordinate === 'col') {\n    end = range.effectiveEndColumn(dependencyGraph);\n  } else {\n    end = range.effectiveEndRow(dependencyGraph);\n  }\n\n  var start = range.start[coordinate];\n  var centerValueFn;\n\n  if (coordinate === 'row') {\n    centerValueFn = function centerValueFn(center) {\n      return getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, range.start.col, center)));\n    };\n  } else {\n    centerValueFn = function centerValueFn(center) {\n      return getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, center, range.start.row)));\n    };\n  }\n\n  var pos = lowerBound(centerValueFn, key, start, end);\n\n  if (_typeof(centerValueFn(pos)) !== _typeof(key)) {\n    return -1;\n  } else {\n    return pos - start;\n  }\n}\n/*\n* If key exists returns first index of key element\n* Otherwise returns first index of greatest element smaller than key\n* assuming sorted values\n* */\n\nexport function lowerBound(value, key, start, end) {\n  while (start <= end) {\n    var center = Math.floor((start + end) / 2);\n    var cmp = compare(key, value(center));\n\n    if (cmp > 0) {\n      start = center + 1;\n    } else if (cmp < 0) {\n      end = center - 1;\n    } else if (start != center) {\n      end = center;\n    } else {\n      return center;\n    }\n  }\n\n  return end;\n}\n/*\n* numbers < strings < false < true\n* */\n\nexport function compare(left, right) {\n  if (_typeof(left) === _typeof(right)) {\n    if (left === EmptyValue) {\n      return 0;\n    }\n\n    return left < right ? -1 : left > right ? 1 : 0;\n  }\n\n  if (left === EmptyValue) {\n    return -1;\n  }\n\n  if (right === EmptyValue) {\n    return 1;\n  }\n\n  if (right instanceof CellError) {\n    return -1;\n  }\n\n  if (typeof left === 'number' && typeof right === 'string') {\n    return -1;\n  }\n\n  if (typeof left === 'number' && typeof right === 'boolean') {\n    return -1;\n  }\n\n  if (typeof left === 'string' && typeof right === 'number') {\n    return 1;\n  }\n\n  if (typeof left === 'string' && typeof right === 'boolean') {\n    return -1;\n  }\n\n  return 1;\n}"]},"metadata":{},"sourceType":"module"}