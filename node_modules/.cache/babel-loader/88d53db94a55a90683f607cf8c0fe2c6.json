{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n\nimport { ArraySize } from './ArraySize';\nimport { EmptyValue } from './interpreter/InterpreterValue';\nimport { SimpleRangeValue } from './interpreter/SimpleRangeValue';\nexport var NotComputedArray = /*#__PURE__*/function () {\n  function NotComputedArray(size) {\n    _classCallCheck(this, NotComputedArray);\n\n    this.size = size;\n  }\n\n  _createClass(NotComputedArray, [{\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"get\",\n    value: function get(col, row) {\n      throw Error('Array not computed yet.');\n    }\n  }, {\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      throw Error('Array not computed yet.');\n    }\n  }]);\n\n  return NotComputedArray;\n}();\nexport var ArrayValue = /*#__PURE__*/function () {\n  function ArrayValue(array) {\n    _classCallCheck(this, ArrayValue);\n\n    this.size = new ArraySize(array.length > 0 ? array[0].length : 0, array.length);\n    this.array = array;\n  }\n\n  _createClass(ArrayValue, [{\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      return SimpleRangeValue.onlyValues(this.array);\n    }\n  }, {\n    key: \"addRows\",\n    value: function addRows(aboveRow, numberOfRows) {\n      var _this$array;\n\n      (_this$array = this.array).splice.apply(_this$array, [aboveRow, 0].concat(_toConsumableArray(this.nullArrays(numberOfRows, this.width()))));\n\n      this.size.height += numberOfRows;\n    }\n  }, {\n    key: \"addColumns\",\n    value: function addColumns(aboveColumn, numberOfColumns) {\n      for (var i = 0; i < this.height(); i++) {\n        var _this$array$i;\n\n        (_this$array$i = this.array[i]).splice.apply(_this$array$i, [aboveColumn, 0].concat(_toConsumableArray(new Array(numberOfColumns).fill(EmptyValue))));\n      }\n\n      this.size.width += numberOfColumns;\n    }\n  }, {\n    key: \"removeRows\",\n    value: function removeRows(startRow, endRow) {\n      if (this.outOfBound(0, startRow) || this.outOfBound(0, endRow)) {\n        throw Error('Array index out of bound');\n      }\n\n      var numberOfRows = endRow - startRow + 1;\n      this.array.splice(startRow, numberOfRows);\n      this.size.height -= numberOfRows;\n    }\n  }, {\n    key: \"removeColumns\",\n    value: function removeColumns(leftmostColumn, rightmostColumn) {\n      if (this.outOfBound(leftmostColumn, 0) || this.outOfBound(rightmostColumn, 0)) {\n        throw Error('Array index out of bound');\n      }\n\n      var numberOfColumns = rightmostColumn - leftmostColumn + 1;\n\n      var _iterator = _createForOfIteratorHelper(this.array),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var row = _step.value;\n          row.splice(leftmostColumn, numberOfColumns);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.size.width -= numberOfColumns;\n    }\n  }, {\n    key: \"nullArrays\",\n    value: function nullArrays(count, size) {\n      var result = [];\n\n      for (var i = 0; i < count; ++i) {\n        result.push(new Array(size).fill(EmptyValue));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get\",\n    value: function get(col, row) {\n      if (this.outOfBound(col, row)) {\n        throw Error('Array index out of bound');\n      }\n\n      return this.array[row][col];\n    }\n  }, {\n    key: \"set\",\n    value: function set(col, row, value) {\n      if (this.outOfBound(col, row)) {\n        throw Error('Array index out of bound');\n      }\n\n      this.array[row][col] = value;\n    }\n  }, {\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    }\n  }, {\n    key: \"raw\",\n    value: function raw() {\n      return this.array;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(newSize) {\n      if (this.height() < newSize.height) {\n        this.addRows(this.height(), newSize.height - this.height());\n      }\n\n      if (this.height() > newSize.height) {\n        throw 'Resizing to smaller array';\n      }\n\n      if (this.width() < newSize.width) {\n        this.addColumns(this.width(), newSize.width - this.width());\n      }\n\n      if (this.width() > newSize.width) {\n        throw 'Resizing to smaller array';\n      }\n    }\n  }, {\n    key: \"outOfBound\",\n    value: function outOfBound(col, row) {\n      return col < 0 || row < 0 || row > this.size.height - 1 || col > this.size.width - 1;\n    }\n  }], [{\n    key: \"fromInterpreterValue\",\n    value: function fromInterpreterValue(value) {\n      if (value instanceof SimpleRangeValue) {\n        return new ArrayValue(value.data);\n      } else {\n        return new ArrayValue([[value]]);\n      }\n    }\n  }]);\n\n  return ArrayValue;\n}();\nexport var ErroredArray = /*#__PURE__*/function () {\n  function ErroredArray(error, size) {\n    _classCallCheck(this, ErroredArray);\n\n    this.error = error;\n    this.size = size;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  _createClass(ErroredArray, [{\n    key: \"get\",\n    value: function get(col, row) {\n      return this.error;\n    }\n  }, {\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    }\n  }, {\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      return this.error;\n    }\n  }]);\n\n  return ErroredArray;\n}();","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/ArrayValue.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","iter","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","ArraySize","EmptyValue","SimpleRangeValue","NotComputedArray","size","width","height","get","col","row","Error","simpleRangeValue","ArrayValue","array","onlyValues","addRows","aboveRow","numberOfRows","_this$array","splice","apply","concat","nullArrays","addColumns","aboveColumn","numberOfColumns","_this$array$i","fill","removeRows","startRow","endRow","outOfBound","removeColumns","leftmostColumn","rightmostColumn","_iterator","_step","count","result","push","set","raw","resize","newSize","fromInterpreterValue","data","ErroredArray","error"],"mappings":"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","sourcesContent":["function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\nimport { ArraySize } from './ArraySize';\nimport { EmptyValue } from './interpreter/InterpreterValue';\nimport { SimpleRangeValue } from './interpreter/SimpleRangeValue';\nexport var NotComputedArray = /*#__PURE__*/function () {\n  function NotComputedArray(size) {\n    _classCallCheck(this, NotComputedArray);\n\n    this.size = size;\n  }\n\n  _createClass(NotComputedArray, [{\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"get\",\n    value: function get(col, row) {\n      throw Error('Array not computed yet.');\n    }\n  }, {\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      throw Error('Array not computed yet.');\n    }\n  }]);\n\n  return NotComputedArray;\n}();\nexport var ArrayValue = /*#__PURE__*/function () {\n  function ArrayValue(array) {\n    _classCallCheck(this, ArrayValue);\n\n    this.size = new ArraySize(array.length > 0 ? array[0].length : 0, array.length);\n    this.array = array;\n  }\n\n  _createClass(ArrayValue, [{\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      return SimpleRangeValue.onlyValues(this.array);\n    }\n  }, {\n    key: \"addRows\",\n    value: function addRows(aboveRow, numberOfRows) {\n      var _this$array;\n\n      (_this$array = this.array).splice.apply(_this$array, [aboveRow, 0].concat(_toConsumableArray(this.nullArrays(numberOfRows, this.width()))));\n\n      this.size.height += numberOfRows;\n    }\n  }, {\n    key: \"addColumns\",\n    value: function addColumns(aboveColumn, numberOfColumns) {\n      for (var i = 0; i < this.height(); i++) {\n        var _this$array$i;\n\n        (_this$array$i = this.array[i]).splice.apply(_this$array$i, [aboveColumn, 0].concat(_toConsumableArray(new Array(numberOfColumns).fill(EmptyValue))));\n      }\n\n      this.size.width += numberOfColumns;\n    }\n  }, {\n    key: \"removeRows\",\n    value: function removeRows(startRow, endRow) {\n      if (this.outOfBound(0, startRow) || this.outOfBound(0, endRow)) {\n        throw Error('Array index out of bound');\n      }\n\n      var numberOfRows = endRow - startRow + 1;\n      this.array.splice(startRow, numberOfRows);\n      this.size.height -= numberOfRows;\n    }\n  }, {\n    key: \"removeColumns\",\n    value: function removeColumns(leftmostColumn, rightmostColumn) {\n      if (this.outOfBound(leftmostColumn, 0) || this.outOfBound(rightmostColumn, 0)) {\n        throw Error('Array index out of bound');\n      }\n\n      var numberOfColumns = rightmostColumn - leftmostColumn + 1;\n\n      var _iterator = _createForOfIteratorHelper(this.array),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var row = _step.value;\n          row.splice(leftmostColumn, numberOfColumns);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.size.width -= numberOfColumns;\n    }\n  }, {\n    key: \"nullArrays\",\n    value: function nullArrays(count, size) {\n      var result = [];\n\n      for (var i = 0; i < count; ++i) {\n        result.push(new Array(size).fill(EmptyValue));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get\",\n    value: function get(col, row) {\n      if (this.outOfBound(col, row)) {\n        throw Error('Array index out of bound');\n      }\n\n      return this.array[row][col];\n    }\n  }, {\n    key: \"set\",\n    value: function set(col, row, value) {\n      if (this.outOfBound(col, row)) {\n        throw Error('Array index out of bound');\n      }\n\n      this.array[row][col] = value;\n    }\n  }, {\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    }\n  }, {\n    key: \"raw\",\n    value: function raw() {\n      return this.array;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(newSize) {\n      if (this.height() < newSize.height) {\n        this.addRows(this.height(), newSize.height - this.height());\n      }\n\n      if (this.height() > newSize.height) {\n        throw 'Resizing to smaller array';\n      }\n\n      if (this.width() < newSize.width) {\n        this.addColumns(this.width(), newSize.width - this.width());\n      }\n\n      if (this.width() > newSize.width) {\n        throw 'Resizing to smaller array';\n      }\n    }\n  }, {\n    key: \"outOfBound\",\n    value: function outOfBound(col, row) {\n      return col < 0 || row < 0 || row > this.size.height - 1 || col > this.size.width - 1;\n    }\n  }], [{\n    key: \"fromInterpreterValue\",\n    value: function fromInterpreterValue(value) {\n      if (value instanceof SimpleRangeValue) {\n        return new ArrayValue(value.data);\n      } else {\n        return new ArrayValue([[value]]);\n      }\n    }\n  }]);\n\n  return ArrayValue;\n}();\nexport var ErroredArray = /*#__PURE__*/function () {\n  function ErroredArray(error, size) {\n    _classCallCheck(this, ErroredArray);\n\n    this.error = error;\n    this.size = size;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  _createClass(ErroredArray, [{\n    key: \"get\",\n    value: function get(col, row) {\n      return this.error;\n    }\n  }, {\n    key: \"width\",\n    value: function width() {\n      return this.size.width;\n    }\n  }, {\n    key: \"height\",\n    value: function height() {\n      return this.size.height;\n    }\n  }, {\n    key: \"simpleRangeValue\",\n    value: function simpleRangeValue() {\n      return this.error;\n    }\n  }]);\n\n  return ErroredArray;\n}();"]},"metadata":{},"sourceType":"module"}