{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { assign, forEach, isRegExp, map, pick } from \"../../../utils/utils\";\nimport { tokenLabel } from \"../../../scan/tokens_public\";\n\nvar AbstractProduction = function () {\n  function AbstractProduction(definition) {\n    this.definition = definition;\n  }\n\n  AbstractProduction.prototype.accept = function (visitor) {\n    visitor.visit(this);\n    forEach(this.definition, function (prod) {\n      prod.accept(visitor);\n    });\n  };\n\n  return AbstractProduction;\n}();\n\nexport { AbstractProduction };\n\nvar NonTerminal = function (_super) {\n  __extends(NonTerminal, _super);\n\n  function NonTerminal(options) {\n    var _this = _super.call(this, []) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  Object.defineProperty(NonTerminal.prototype, \"definition\", {\n    get: function () {\n      if (this.referencedRule !== undefined) {\n        return this.referencedRule.definition;\n      }\n\n      return [];\n    },\n    set: function (definition) {// immutable\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  NonTerminal.prototype.accept = function (visitor) {\n    visitor.visit(this); // don't visit children of a reference, we will get cyclic infinite loops if we do so\n  };\n\n  return NonTerminal;\n}(AbstractProduction);\n\nexport { NonTerminal };\n\nvar Rule = function (_super) {\n  __extends(Rule, _super);\n\n  function Rule(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.orgText = \"\";\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Rule;\n}(AbstractProduction);\n\nexport { Rule }; // TODO: is this only used in an Alternation?\n//       Perhaps `Flat` should be renamed to `Alternative`?\n\nvar Flat = function (_super) {\n  __extends(Flat, _super); // A named Flat production is used to indicate a Nested Rule in an alternation\n\n\n  function Flat(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.ignoreAmbiguities = false;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Flat;\n}(AbstractProduction);\n\nexport { Flat };\n\nvar Option = function (_super) {\n  __extends(Option, _super);\n\n  function Option(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Option;\n}(AbstractProduction);\n\nexport { Option };\n\nvar RepetitionMandatory = function (_super) {\n  __extends(RepetitionMandatory, _super);\n\n  function RepetitionMandatory(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionMandatory;\n}(AbstractProduction);\n\nexport { RepetitionMandatory };\n\nvar RepetitionMandatoryWithSeparator = function (_super) {\n  __extends(RepetitionMandatoryWithSeparator, _super);\n\n  function RepetitionMandatoryWithSeparator(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionMandatoryWithSeparator;\n}(AbstractProduction);\n\nexport { RepetitionMandatoryWithSeparator };\n\nvar Repetition = function (_super) {\n  __extends(Repetition, _super);\n\n  function Repetition(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Repetition;\n}(AbstractProduction);\n\nexport { Repetition };\n\nvar RepetitionWithSeparator = function (_super) {\n  __extends(RepetitionWithSeparator, _super);\n\n  function RepetitionWithSeparator(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionWithSeparator;\n}(AbstractProduction);\n\nexport { RepetitionWithSeparator };\n\nvar Alternation = function (_super) {\n  __extends(Alternation, _super);\n\n  function Alternation(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    _this.ignoreAmbiguities = false;\n    _this.hasPredicates = false;\n    assign(_this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Alternation;\n}(AbstractProduction);\n\nexport { Alternation };\n\nvar Terminal = function () {\n  function Terminal(options) {\n    this.idx = 1;\n    assign(this, pick(options, function (v) {\n      return v !== undefined;\n    }));\n  }\n\n  Terminal.prototype.accept = function (visitor) {\n    visitor.visit(this);\n  };\n\n  return Terminal;\n}();\n\nexport { Terminal };\nexport function serializeGrammar(topRules) {\n  return map(topRules, serializeProduction);\n}\nexport function serializeProduction(node) {\n  function convertDefinition(definition) {\n    return map(definition, serializeProduction);\n  }\n  /* istanbul ignore else */\n\n\n  if (node instanceof NonTerminal) {\n    return {\n      type: \"NonTerminal\",\n      name: node.nonTerminalName,\n      idx: node.idx\n    };\n  } else if (node instanceof Flat) {\n    return {\n      type: \"Flat\",\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Option) {\n    return {\n      type: \"Option\",\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionMandatory) {\n    return {\n      type: \"RepetitionMandatory\",\n      name: node.name,\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionMandatoryWithSeparator) {\n    return {\n      type: \"RepetitionMandatoryWithSeparator\",\n      name: node.name,\n      idx: node.idx,\n      separator: serializeProduction(new Terminal({\n        terminalType: node.separator\n      })),\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionWithSeparator) {\n    return {\n      type: \"RepetitionWithSeparator\",\n      name: node.name,\n      idx: node.idx,\n      separator: serializeProduction(new Terminal({\n        terminalType: node.separator\n      })),\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Repetition) {\n    return {\n      type: \"Repetition\",\n      name: node.name,\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Alternation) {\n    return {\n      type: \"Alternation\",\n      name: node.name,\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Terminal) {\n    var serializedTerminal = {\n      type: \"Terminal\",\n      name: node.terminalType.name,\n      label: tokenLabel(node.terminalType),\n      idx: node.idx\n    };\n    var pattern = node.terminalType.PATTERN;\n\n    if (node.terminalType.PATTERN) {\n      serializedTerminal.pattern = isRegExp(pattern) ? pattern.source : pattern;\n    }\n\n    return serializedTerminal;\n  } else if (node instanceof Rule) {\n    return {\n      type: \"Rule\",\n      name: node.name,\n      orgText: node.orgText,\n      definition: convertDefinition(node.definition)\n    };\n  } else {\n    throw Error(\"non exhaustive match\");\n  }\n}","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/chevrotain/lib_esm/src/parse/grammar/gast/gast_public.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","assign","forEach","isRegExp","map","pick","tokenLabel","AbstractProduction","definition","accept","visitor","visit","prod","NonTerminal","_super","options","_this","call","idx","v","undefined","defineProperty","get","referencedRule","set","enumerable","configurable","Rule","orgText","Flat","ignoreAmbiguities","Option","RepetitionMandatory","RepetitionMandatoryWithSeparator","Repetition","RepetitionWithSeparator","Alternation","hasPredicates","Terminal","serializeGrammar","topRules","serializeProduction","node","convertDefinition","type","name","nonTerminalName","separator","terminalType","serializedTerminal","label","pattern","PATTERN","source","Error"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { assign, forEach, isRegExp, map, pick } from \"../../../utils/utils\";\nimport { tokenLabel } from \"../../../scan/tokens_public\";\nvar AbstractProduction = /** @class */ (function () {\n    function AbstractProduction(definition) {\n        this.definition = definition;\n    }\n    AbstractProduction.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        forEach(this.definition, function (prod) {\n            prod.accept(visitor);\n        });\n    };\n    return AbstractProduction;\n}());\nexport { AbstractProduction };\nvar NonTerminal = /** @class */ (function (_super) {\n    __extends(NonTerminal, _super);\n    function NonTerminal(options) {\n        var _this = _super.call(this, []) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(NonTerminal.prototype, \"definition\", {\n        get: function () {\n            if (this.referencedRule !== undefined) {\n                return this.referencedRule.definition;\n            }\n            return [];\n        },\n        set: function (definition) {\n            // immutable\n        },\n        enumerable: true,\n        configurable: true\n    });\n    NonTerminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        // don't visit children of a reference, we will get cyclic infinite loops if we do so\n    };\n    return NonTerminal;\n}(AbstractProduction));\nexport { NonTerminal };\nvar Rule = /** @class */ (function (_super) {\n    __extends(Rule, _super);\n    function Rule(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.orgText = \"\";\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Rule;\n}(AbstractProduction));\nexport { Rule };\n// TODO: is this only used in an Alternation?\n//       Perhaps `Flat` should be renamed to `Alternative`?\nvar Flat = /** @class */ (function (_super) {\n    __extends(Flat, _super);\n    // A named Flat production is used to indicate a Nested Rule in an alternation\n    function Flat(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.ignoreAmbiguities = false;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Flat;\n}(AbstractProduction));\nexport { Flat };\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Option;\n}(AbstractProduction));\nexport { Option };\nvar RepetitionMandatory = /** @class */ (function (_super) {\n    __extends(RepetitionMandatory, _super);\n    function RepetitionMandatory(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatory;\n}(AbstractProduction));\nexport { RepetitionMandatory };\nvar RepetitionMandatoryWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionMandatoryWithSeparator, _super);\n    function RepetitionMandatoryWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatoryWithSeparator;\n}(AbstractProduction));\nexport { RepetitionMandatoryWithSeparator };\nvar Repetition = /** @class */ (function (_super) {\n    __extends(Repetition, _super);\n    function Repetition(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Repetition;\n}(AbstractProduction));\nexport { Repetition };\nvar RepetitionWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionWithSeparator, _super);\n    function RepetitionWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionWithSeparator;\n}(AbstractProduction));\nexport { RepetitionWithSeparator };\nvar Alternation = /** @class */ (function (_super) {\n    __extends(Alternation, _super);\n    function Alternation(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        _this.ignoreAmbiguities = false;\n        _this.hasPredicates = false;\n        assign(_this, pick(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Alternation;\n}(AbstractProduction));\nexport { Alternation };\nvar Terminal = /** @class */ (function () {\n    function Terminal(options) {\n        this.idx = 1;\n        assign(this, pick(options, function (v) { return v !== undefined; }));\n    }\n    Terminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n    };\n    return Terminal;\n}());\nexport { Terminal };\nexport function serializeGrammar(topRules) {\n    return map(topRules, serializeProduction);\n}\nexport function serializeProduction(node) {\n    function convertDefinition(definition) {\n        return map(definition, serializeProduction);\n    }\n    /* istanbul ignore else */\n    if (node instanceof NonTerminal) {\n        return {\n            type: \"NonTerminal\",\n            name: node.nonTerminalName,\n            idx: node.idx\n        };\n    }\n    else if (node instanceof Flat) {\n        return {\n            type: \"Flat\",\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Option) {\n        return {\n            type: \"Option\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatory) {\n        return {\n            type: \"RepetitionMandatory\",\n            name: node.name,\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatoryWithSeparator) {\n        return {\n            type: \"RepetitionMandatoryWithSeparator\",\n            name: node.name,\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionWithSeparator) {\n        return {\n            type: \"RepetitionWithSeparator\",\n            name: node.name,\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Repetition) {\n        return {\n            type: \"Repetition\",\n            name: node.name,\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Alternation) {\n        return {\n            type: \"Alternation\",\n            name: node.name,\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Terminal) {\n        var serializedTerminal = {\n            type: \"Terminal\",\n            name: node.terminalType.name,\n            label: tokenLabel(node.terminalType),\n            idx: node.idx\n        };\n        var pattern = node.terminalType.PATTERN;\n        if (node.terminalType.PATTERN) {\n            serializedTerminal.pattern = isRegExp(pattern)\n                ? pattern.source\n                : pattern;\n        }\n        return serializedTerminal;\n    }\n    else if (node instanceof Rule) {\n        return {\n            type: \"Rule\",\n            name: node.name,\n            orgText: node.orgText,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\n//# sourceMappingURL=gast_public.js.map"]},"metadata":{},"sourceType":"module"}