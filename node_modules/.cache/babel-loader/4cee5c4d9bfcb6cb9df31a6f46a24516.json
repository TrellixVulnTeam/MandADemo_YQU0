{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n\nimport { CellError, ErrorType } from '../../Cell';\nimport { ErrorMessage } from '../../error-message';\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\nimport { centralF, chisquare, corrcoeff, covariance, geomean as _geomean, mean, normal, stdev, studentt, sumsqerr, variance } from './3rdparty/jstat/jstat';\nimport { ArgumentTypes, FunctionPlugin } from './FunctionPlugin';\nexport var StatisticalAggregationPlugin = /*#__PURE__*/function (_FunctionPlugin) {\n  _inherits(StatisticalAggregationPlugin, _FunctionPlugin);\n\n  var _super = _createSuper(StatisticalAggregationPlugin);\n\n  function StatisticalAggregationPlugin() {\n    _classCallCheck(this, StatisticalAggregationPlugin);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(StatisticalAggregationPlugin, [{\n    key: \"avedev\",\n    value: function avedev(ast, formulaAddress) {\n      var _this = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('AVEDEV'), function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var coerced = _this.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var avg = mean(coerced);\n        return coerced.reduce(function (a, b) {\n          return a + Math.abs(b - avg);\n        }, 0) / coerced.length;\n      });\n    }\n  }, {\n    key: \"devsq\",\n    value: function devsq(ast, formulaAddress) {\n      var _this2 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('DEVSQ'), function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        var coerced = _this2.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return 0;\n        }\n\n        return sumsqerr(coerced);\n      });\n    }\n  }, {\n    key: \"geomean\",\n    value: function geomean(ast, formulaAddress) {\n      var _this3 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('GEOMEAN'), function () {\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        var coerced = _this3.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\n        }\n\n        var _iterator = _createForOfIteratorHelper(coerced),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var val = _step.value;\n\n            if (val <= 0) {\n              return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        return _geomean(coerced);\n      });\n    }\n  }, {\n    key: \"harmean\",\n    value: function harmean(ast, formulaAddress) {\n      var _this4 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('HARMEAN'), function () {\n        for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        var coerced = _this4.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\n        }\n\n        var _iterator2 = _createForOfIteratorHelper(coerced),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var val = _step2.value;\n\n            if (val <= 0) {\n              return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        return coerced.length / coerced.reduce(function (a, b) {\n          return a + 1 / b;\n        }, 0);\n      });\n    }\n  }, {\n    key: \"correl\",\n    value: function correl(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('CORREL'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return corrcoeff(ret[0], ret[1]);\n      });\n    }\n  }, {\n    key: \"rsq\",\n    value: function rsq(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('RSQ'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return Math.pow(corrcoeff(ret[0], ret[1]), 2);\n      });\n    }\n  }, {\n    key: \"covariancep\",\n    value: function covariancep(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('COVARIANCE.P'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n < 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.OneValue);\n        }\n\n        if (n === 1) {\n          return 0;\n        }\n\n        return covariance(ret[0], ret[1]) * (n - 1) / n;\n      });\n    }\n  }, {\n    key: \"covariances\",\n    value: function covariances(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('COVARIANCE.S'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return covariance(ret[0], ret[1]);\n      });\n    }\n  }, {\n    key: \"ztest\",\n    value: function ztest(ast, formulaAddress) {\n      var _this5 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('Z.TEST'), function (range, x, sigma) {\n        var vals = _this5.interpreter.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\n\n        if (vals instanceof CellError) {\n          return vals;\n        }\n\n        var n = vals.length;\n\n        if (sigma === undefined) {\n          if (n < 2) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          sigma = stdev(vals, true);\n        }\n\n        if (n < 1) {\n          return new CellError(ErrorType.NA, ErrorMessage.OneValue);\n        }\n\n        if (sigma === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return 1 - normal.cdf((mean(vals) - x) / (sigma / Math.sqrt(n)), 0, 1);\n      });\n    }\n  }, {\n    key: \"ftest\",\n    value: function ftest(ast, formulaAddress) {\n      var _this6 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('F.TEST'), function (dataX, dataY) {\n        var arrX = _this6.interpreter.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\n\n        var arrY = _this6.interpreter.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\n\n        if (arrX instanceof CellError) {\n          return arrX;\n        }\n\n        if (arrY instanceof CellError) {\n          return arrY;\n        }\n\n        if (arrX.length <= 1 || arrY.length <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var vx = variance(arrX, true);\n        var vy = variance(arrY, true);\n\n        if (vx === 0 || vy === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var r = vx / vy;\n        var v = centralF.cdf(r, arrX.length - 1, arrY.length - 1);\n        return 2 * Math.min(v, 1 - v);\n      });\n    }\n  }, {\n    key: \"steyx\",\n    value: function steyx(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('STEYX'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 2) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        return Math.sqrt((sumsqerr(ret[0]) - Math.pow(covariance(ret[0], ret[1]) * (n - 1), 2) / sumsqerr(ret[1])) / (n - 2));\n      });\n    }\n  }, {\n    key: \"slope\",\n    value: function slope(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SLOPE'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return covariance(ret[0], ret[1]) * (n - 1) / sumsqerr(ret[1]);\n      });\n    }\n  }, {\n    key: \"chisqtest\",\n    value: function chisqtest(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('CHISQ.TEST'), function (dataX, dataY) {\n        var r = dataX.height();\n        var c = dataX.width();\n\n        if (dataY.height() !== r || dataY.width() !== c) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        if (ret[0].length <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        var sum = 0;\n\n        for (var i = 0; i < ret[0].length; i++) {\n          if (ret[1][i] === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          sum += Math.pow(ret[0][i] - ret[1][i], 2) / ret[1][i];\n        }\n\n        if (sum < 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.NaN);\n        }\n\n        return 1 - chisquare.cdf(sum, r > 1 && c > 1 ? (r - 1) * (c - 1) : r * c - 1);\n      });\n    }\n  }, {\n    key: \"ttest\",\n    value: function ttest(ast, formulaAddress) {\n      var _this7 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('T.TEST'), function (dataX, dataY, tails, type) {\n        var arrX = _this7.interpreter.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\n\n        var arrY = _this7.interpreter.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\n\n        if (arrX instanceof CellError) {\n          return arrX;\n        }\n\n        if (arrY instanceof CellError) {\n          return arrY;\n        }\n\n        var n = arrX.length;\n        var m = arrY.length;\n\n        if (type === 1) {\n          if (m !== n) {\n            return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n          }\n\n          if (n <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var sub = Array(n);\n\n          for (var i = 0; i < n; i++) {\n            sub[i] = arrX[i] - arrY[i];\n          }\n\n          var s = stdev(sub, true);\n\n          if (s === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var t = Math.abs(Math.sqrt(n) * mean(sub) / s);\n          return tails * (1 - studentt.cdf(t, n - 1));\n        } else if (type === 2) {\n          if (n <= 1 || m <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var _s = (sumsqerr(arrX) + sumsqerr(arrY)) / (n + m - 2);\n\n          if (_s === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var _t = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(_s * (1 / n + 1 / m)));\n\n          return tails * (1 - studentt.cdf(_t, n + m - 2));\n        } else {\n          //type === 3\n          if (n <= 1 || m <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var sx = variance(arrX, true);\n          var sy = variance(arrY, true);\n\n          if (sx === 0 && sy === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var _t2 = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(sx / n + sy / m));\n\n          var v = Math.pow(sx / n + sy / m, 2) / (Math.pow(sx / n, 2) / (n - 1) + Math.pow(sy / m, 2) / (m - 1));\n          return tails * (1 - studentt.cdf(_t2, v));\n        }\n      });\n    }\n  }, {\n    key: \"skew\",\n    value: function skew(ast, formulaAddress) {\n      var _this8 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SKEW'), function () {\n        for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          args[_key5] = arguments[_key5];\n        }\n\n        var coerced = _this8.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        var n = coerced.length;\n\n        if (n < 3) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        var avg = mean(coerced);\n        var s = stdev(coerced, true);\n\n        if (s === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return coerced.reduce(function (a, b) {\n          return a + Math.pow((b - avg) / s, 3);\n        }, 0) * n / (n - 1) / (n - 2);\n      });\n    }\n  }, {\n    key: \"skewp\",\n    value: function skewp(ast, formulaAddress) {\n      var _this9 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SKEW.P'), function () {\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n\n        var coerced = _this9.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        var n = coerced.length;\n\n        if (n < 3) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        var avg = mean(coerced);\n        var s = stdev(coerced, false);\n\n        if (s === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return coerced.reduce(function (a, b) {\n          return a + Math.pow((b - avg) / s, 3);\n        }, 0) / n;\n      });\n    }\n  }]);\n\n  return StatisticalAggregationPlugin;\n}(FunctionPlugin);\nStatisticalAggregationPlugin.implementedFunctions = {\n  'AVEDEV': {\n    method: 'avedev',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'DEVSQ': {\n    method: 'devsq',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'GEOMEAN': {\n    method: 'geomean',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'HARMEAN': {\n    method: 'harmean',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'CORREL': {\n    method: 'correl',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'RSQ': {\n    method: 'rsq',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'COVARIANCE.P': {\n    method: 'covariancep',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'COVARIANCE.S': {\n    method: 'covariances',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'Z.TEST': {\n    method: 'ztest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.NUMBER\n    }, {\n      argumentType: ArgumentTypes.NUMBER,\n      optionalArg: true\n    }]\n  },\n  'F.TEST': {\n    method: 'ftest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'STEYX': {\n    method: 'steyx',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'SLOPE': {\n    method: 'slope',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'CHISQ.TEST': {\n    method: 'chisqtest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'T.TEST': {\n    method: 'ttest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.INTEGER,\n      minValue: 1,\n      maxValue: 2\n    }, {\n      argumentType: ArgumentTypes.INTEGER,\n      minValue: 1,\n      maxValue: 3\n    }]\n  },\n  'SKEW': {\n    method: 'skew',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'SKEW.P': {\n    method: 'skewp',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  }\n};\nStatisticalAggregationPlugin.aliases = {\n  COVAR: 'COVARIANCE.P',\n  FTEST: 'F.TEST',\n  PEARSON: 'CORREL',\n  ZTEST: 'Z.TEST',\n  CHITEST: 'CHISQ.TEST',\n  TTEST: 'T.TEST',\n  COVARIANCEP: 'COVARIANCE.P',\n  COVARIANCES: 'COVARIANCE.S',\n  SKEWP: 'SKEW.P'\n};\n\nfunction parseTwoArrays(dataX, dataY) {\n  var xit = dataX.iterateValuesFromTopLeftCorner();\n  var yit = dataY.iterateValuesFromTopLeftCorner();\n  var x, y;\n  var arrX = [];\n  var arrY = [];\n\n  while (x = xit.next(), y = yit.next(), !x.done && !y.done) {\n    var xval = x.value;\n    var yval = y.value;\n\n    if (xval instanceof CellError) {\n      return xval;\n    } else if (yval instanceof CellError) {\n      return yval;\n    } else if (isExtendedNumber(xval) && isExtendedNumber(yval)) {\n      arrX.push(getRawValue(xval));\n      arrY.push(getRawValue(yval));\n    }\n  }\n\n  return [arrX, arrY];\n}","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/interpreter/plugin/StatisticalAggregationPlugin.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_createForOfIteratorHelper","o","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","toString","slice","name","from","test","arr","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","CellError","ErrorType","ErrorMessage","getRawValue","isExtendedNumber","centralF","chisquare","corrcoeff","covariance","geomean","_geomean","mean","normal","stdev","studentt","sumsqerr","variance","ArgumentTypes","FunctionPlugin","StatisticalAggregationPlugin","_FunctionPlugin","_super","avedev","ast","formulaAddress","_this","runFunction","args","metadata","_len","_key","coerced","interpreter","arithmeticHelper","coerceNumbersExactRanges","DIV_BY_ZERO","avg","reduce","a","b","Math","abs","devsq","_this2","_len2","_key2","_this3","_len3","_key3","NUM","OneValue","_iterator","_step","val","ValueSmall","harmean","_this4","_len4","_key4","_iterator2","_step2","correl","dataX","dataY","numberOfElements","NA","EqualLength","ret","parseTwoArrays","TwoValues","rsq","pow","covariancep","covariances","ztest","_this5","range","x","sigma","vals","manyToExactNumbers","valuesFromTopLeftCorner","undefined","cdf","sqrt","ftest","_this6","arrX","arrY","vx","vy","r","v","min","steyx","ThreeValues","slope","chisqtest","height","c","width","sum","NaN","ttest","_this7","tails","type","m","sub","t","_s","_t","sx","sy","_t2","skew","_this8","_len5","_key5","skewp","_this9","_len6","_key6","implementedFunctions","method","parameters","argumentType","ANY","repeatLastArgs","RANGE","NUMBER","optionalArg","INTEGER","minValue","maxValue","aliases","COVAR","FTEST","PEARSON","ZTEST","CHITEST","TTEST","COVARIANCEP","COVARIANCES","SKEWP","xit","iterateValuesFromTopLeftCorner","yit","y","xval","yval","push"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\nimport { CellError, ErrorType } from '../../Cell';\nimport { ErrorMessage } from '../../error-message';\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\nimport { centralF, chisquare, corrcoeff, covariance, geomean as _geomean, mean, normal, stdev, studentt, sumsqerr, variance } from './3rdparty/jstat/jstat';\nimport { ArgumentTypes, FunctionPlugin } from './FunctionPlugin';\nexport var StatisticalAggregationPlugin = /*#__PURE__*/function (_FunctionPlugin) {\n  _inherits(StatisticalAggregationPlugin, _FunctionPlugin);\n\n  var _super = _createSuper(StatisticalAggregationPlugin);\n\n  function StatisticalAggregationPlugin() {\n    _classCallCheck(this, StatisticalAggregationPlugin);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(StatisticalAggregationPlugin, [{\n    key: \"avedev\",\n    value: function avedev(ast, formulaAddress) {\n      var _this = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('AVEDEV'), function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var coerced = _this.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var avg = mean(coerced);\n        return coerced.reduce(function (a, b) {\n          return a + Math.abs(b - avg);\n        }, 0) / coerced.length;\n      });\n    }\n  }, {\n    key: \"devsq\",\n    value: function devsq(ast, formulaAddress) {\n      var _this2 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('DEVSQ'), function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        var coerced = _this2.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return 0;\n        }\n\n        return sumsqerr(coerced);\n      });\n    }\n  }, {\n    key: \"geomean\",\n    value: function geomean(ast, formulaAddress) {\n      var _this3 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('GEOMEAN'), function () {\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        var coerced = _this3.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\n        }\n\n        var _iterator = _createForOfIteratorHelper(coerced),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var val = _step.value;\n\n            if (val <= 0) {\n              return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        return _geomean(coerced);\n      });\n    }\n  }, {\n    key: \"harmean\",\n    value: function harmean(ast, formulaAddress) {\n      var _this4 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('HARMEAN'), function () {\n        for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        var coerced = _this4.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        if (coerced.length === 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\n        }\n\n        var _iterator2 = _createForOfIteratorHelper(coerced),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var val = _step2.value;\n\n            if (val <= 0) {\n              return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        return coerced.length / coerced.reduce(function (a, b) {\n          return a + 1 / b;\n        }, 0);\n      });\n    }\n  }, {\n    key: \"correl\",\n    value: function correl(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('CORREL'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return corrcoeff(ret[0], ret[1]);\n      });\n    }\n  }, {\n    key: \"rsq\",\n    value: function rsq(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('RSQ'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return Math.pow(corrcoeff(ret[0], ret[1]), 2);\n      });\n    }\n  }, {\n    key: \"covariancep\",\n    value: function covariancep(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('COVARIANCE.P'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n < 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.OneValue);\n        }\n\n        if (n === 1) {\n          return 0;\n        }\n\n        return covariance(ret[0], ret[1]) * (n - 1) / n;\n      });\n    }\n  }, {\n    key: \"covariances\",\n    value: function covariances(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('COVARIANCE.S'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return covariance(ret[0], ret[1]);\n      });\n    }\n  }, {\n    key: \"ztest\",\n    value: function ztest(ast, formulaAddress) {\n      var _this5 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('Z.TEST'), function (range, x, sigma) {\n        var vals = _this5.interpreter.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\n\n        if (vals instanceof CellError) {\n          return vals;\n        }\n\n        var n = vals.length;\n\n        if (sigma === undefined) {\n          if (n < 2) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          sigma = stdev(vals, true);\n        }\n\n        if (n < 1) {\n          return new CellError(ErrorType.NA, ErrorMessage.OneValue);\n        }\n\n        if (sigma === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return 1 - normal.cdf((mean(vals) - x) / (sigma / Math.sqrt(n)), 0, 1);\n      });\n    }\n  }, {\n    key: \"ftest\",\n    value: function ftest(ast, formulaAddress) {\n      var _this6 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('F.TEST'), function (dataX, dataY) {\n        var arrX = _this6.interpreter.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\n\n        var arrY = _this6.interpreter.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\n\n        if (arrX instanceof CellError) {\n          return arrX;\n        }\n\n        if (arrY instanceof CellError) {\n          return arrY;\n        }\n\n        if (arrX.length <= 1 || arrY.length <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var vx = variance(arrX, true);\n        var vy = variance(arrY, true);\n\n        if (vx === 0 || vy === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        var r = vx / vy;\n        var v = centralF.cdf(r, arrX.length - 1, arrY.length - 1);\n        return 2 * Math.min(v, 1 - v);\n      });\n    }\n  }, {\n    key: \"steyx\",\n    value: function steyx(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('STEYX'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 2) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        return Math.sqrt((sumsqerr(ret[0]) - Math.pow(covariance(ret[0], ret[1]) * (n - 1), 2) / sumsqerr(ret[1])) / (n - 2));\n      });\n    }\n  }, {\n    key: \"slope\",\n    value: function slope(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SLOPE'), function (dataX, dataY) {\n        if (dataX.numberOfElements() !== dataY.numberOfElements()) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        var n = ret[0].length;\n\n        if (n <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        return covariance(ret[0], ret[1]) * (n - 1) / sumsqerr(ret[1]);\n      });\n    }\n  }, {\n    key: \"chisqtest\",\n    value: function chisqtest(ast, formulaAddress) {\n      return this.runFunction(ast.args, formulaAddress, this.metadata('CHISQ.TEST'), function (dataX, dataY) {\n        var r = dataX.height();\n        var c = dataX.width();\n\n        if (dataY.height() !== r || dataY.width() !== c) {\n          return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n        }\n\n        var ret = parseTwoArrays(dataX, dataY);\n\n        if (ret instanceof CellError) {\n          return ret;\n        }\n\n        if (ret[0].length <= 1) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n        }\n\n        var sum = 0;\n\n        for (var i = 0; i < ret[0].length; i++) {\n          if (ret[1][i] === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          sum += Math.pow(ret[0][i] - ret[1][i], 2) / ret[1][i];\n        }\n\n        if (sum < 0) {\n          return new CellError(ErrorType.NUM, ErrorMessage.NaN);\n        }\n\n        return 1 - chisquare.cdf(sum, r > 1 && c > 1 ? (r - 1) * (c - 1) : r * c - 1);\n      });\n    }\n  }, {\n    key: \"ttest\",\n    value: function ttest(ast, formulaAddress) {\n      var _this7 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('T.TEST'), function (dataX, dataY, tails, type) {\n        var arrX = _this7.interpreter.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\n\n        var arrY = _this7.interpreter.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\n\n        if (arrX instanceof CellError) {\n          return arrX;\n        }\n\n        if (arrY instanceof CellError) {\n          return arrY;\n        }\n\n        var n = arrX.length;\n        var m = arrY.length;\n\n        if (type === 1) {\n          if (m !== n) {\n            return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\n          }\n\n          if (n <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var sub = Array(n);\n\n          for (var i = 0; i < n; i++) {\n            sub[i] = arrX[i] - arrY[i];\n          }\n\n          var s = stdev(sub, true);\n\n          if (s === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var t = Math.abs(Math.sqrt(n) * mean(sub) / s);\n          return tails * (1 - studentt.cdf(t, n - 1));\n        } else if (type === 2) {\n          if (n <= 1 || m <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var _s = (sumsqerr(arrX) + sumsqerr(arrY)) / (n + m - 2);\n\n          if (_s === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var _t = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(_s * (1 / n + 1 / m)));\n\n          return tails * (1 - studentt.cdf(_t, n + m - 2));\n        } else {\n          //type === 3\n          if (n <= 1 || m <= 1) {\n            return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\n          }\n\n          var sx = variance(arrX, true);\n          var sy = variance(arrY, true);\n\n          if (sx === 0 && sy === 0) {\n            return new CellError(ErrorType.DIV_BY_ZERO);\n          }\n\n          var _t2 = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(sx / n + sy / m));\n\n          var v = Math.pow(sx / n + sy / m, 2) / (Math.pow(sx / n, 2) / (n - 1) + Math.pow(sy / m, 2) / (m - 1));\n          return tails * (1 - studentt.cdf(_t2, v));\n        }\n      });\n    }\n  }, {\n    key: \"skew\",\n    value: function skew(ast, formulaAddress) {\n      var _this8 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SKEW'), function () {\n        for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          args[_key5] = arguments[_key5];\n        }\n\n        var coerced = _this8.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        var n = coerced.length;\n\n        if (n < 3) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        var avg = mean(coerced);\n        var s = stdev(coerced, true);\n\n        if (s === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return coerced.reduce(function (a, b) {\n          return a + Math.pow((b - avg) / s, 3);\n        }, 0) * n / (n - 1) / (n - 2);\n      });\n    }\n  }, {\n    key: \"skewp\",\n    value: function skewp(ast, formulaAddress) {\n      var _this9 = this;\n\n      return this.runFunction(ast.args, formulaAddress, this.metadata('SKEW.P'), function () {\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n\n        var coerced = _this9.interpreter.arithmeticHelper.coerceNumbersExactRanges(args);\n\n        if (coerced instanceof CellError) {\n          return coerced;\n        }\n\n        var n = coerced.length;\n\n        if (n < 3) {\n          return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\n        }\n\n        var avg = mean(coerced);\n        var s = stdev(coerced, false);\n\n        if (s === 0) {\n          return new CellError(ErrorType.DIV_BY_ZERO);\n        }\n\n        return coerced.reduce(function (a, b) {\n          return a + Math.pow((b - avg) / s, 3);\n        }, 0) / n;\n      });\n    }\n  }]);\n\n  return StatisticalAggregationPlugin;\n}(FunctionPlugin);\nStatisticalAggregationPlugin.implementedFunctions = {\n  'AVEDEV': {\n    method: 'avedev',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'DEVSQ': {\n    method: 'devsq',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'GEOMEAN': {\n    method: 'geomean',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'HARMEAN': {\n    method: 'harmean',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'CORREL': {\n    method: 'correl',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'RSQ': {\n    method: 'rsq',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'COVARIANCE.P': {\n    method: 'covariancep',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'COVARIANCE.S': {\n    method: 'covariances',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'Z.TEST': {\n    method: 'ztest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.NUMBER\n    }, {\n      argumentType: ArgumentTypes.NUMBER,\n      optionalArg: true\n    }]\n  },\n  'F.TEST': {\n    method: 'ftest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'STEYX': {\n    method: 'steyx',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'SLOPE': {\n    method: 'slope',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'CHISQ.TEST': {\n    method: 'chisqtest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }]\n  },\n  'T.TEST': {\n    method: 'ttest',\n    parameters: [{\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.RANGE\n    }, {\n      argumentType: ArgumentTypes.INTEGER,\n      minValue: 1,\n      maxValue: 2\n    }, {\n      argumentType: ArgumentTypes.INTEGER,\n      minValue: 1,\n      maxValue: 3\n    }]\n  },\n  'SKEW': {\n    method: 'skew',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  },\n  'SKEW.P': {\n    method: 'skewp',\n    parameters: [{\n      argumentType: ArgumentTypes.ANY\n    }],\n    repeatLastArgs: 1\n  }\n};\nStatisticalAggregationPlugin.aliases = {\n  COVAR: 'COVARIANCE.P',\n  FTEST: 'F.TEST',\n  PEARSON: 'CORREL',\n  ZTEST: 'Z.TEST',\n  CHITEST: 'CHISQ.TEST',\n  TTEST: 'T.TEST',\n  COVARIANCEP: 'COVARIANCE.P',\n  COVARIANCES: 'COVARIANCE.S',\n  SKEWP: 'SKEW.P'\n};\n\nfunction parseTwoArrays(dataX, dataY) {\n  var xit = dataX.iterateValuesFromTopLeftCorner();\n  var yit = dataY.iterateValuesFromTopLeftCorner();\n  var x, y;\n  var arrX = [];\n  var arrY = [];\n\n  while (x = xit.next(), y = yit.next(), !x.done && !y.done) {\n    var xval = x.value;\n    var yval = y.value;\n\n    if (xval instanceof CellError) {\n      return xval;\n    } else if (yval instanceof CellError) {\n      return yval;\n    } else if (isExtendedNumber(xval) && isExtendedNumber(yval)) {\n      arrX.push(getRawValue(xval));\n      arrY.push(getRawValue(yval));\n    }\n  }\n\n  return [arrX, arrY];\n}"]},"metadata":{},"sourceType":"module"}