{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\n\n\nimport { EmptyValue, getRawValue } from './InterpreterValue';\nexport var CriterionType;\n\n(function (CriterionType) {\n  CriterionType[\"GREATER_THAN\"] = \"GREATER_THAN\";\n  CriterionType[\"GREATER_THAN_OR_EQUAL\"] = \"GREATER_THAN_OR_EQUAL\";\n  CriterionType[\"LESS_THAN\"] = \"LESS_THAN\";\n  CriterionType[\"LESS_THAN_OR_EQUAL\"] = \"LESS_THAN_OR_EQUAL\";\n  CriterionType[\"NOT_EQUAL\"] = \"NOT_EQUAL\";\n  CriterionType[\"EQUAL\"] = \"EQUAL\";\n})(CriterionType || (CriterionType = {}));\n\nexport var buildCriterion = function buildCriterion(operator, value) {\n  return {\n    operator: operator,\n    value: value\n  };\n};\nexport var CriterionBuilder = /*#__PURE__*/function () {\n  function CriterionBuilder(config) {\n    _classCallCheck(this, CriterionBuilder);\n\n    var _a, _b, _c, _d;\n\n    this.trueString = (_b = (_a = config.translationPackage.getMaybeFunctionTranslation('TRUE')) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== null && _b !== void 0 ? _b : 'true';\n    this.falseString = (_d = (_c = config.translationPackage.getMaybeFunctionTranslation('FALSE')) === null || _c === void 0 ? void 0 : _c.toLowerCase()) !== null && _d !== void 0 ? _d : 'false';\n  }\n\n  _createClass(CriterionBuilder, [{\n    key: \"fromCellValue\",\n    value: function fromCellValue(raw, arithmeticHelper) {\n      if (typeof raw !== 'string' && typeof raw !== 'boolean' && typeof raw !== 'number') {\n        return undefined;\n      }\n\n      var criterion = this.parseCriterion(raw, arithmeticHelper);\n\n      if (criterion === undefined) {\n        return undefined;\n      }\n\n      return {\n        raw: raw,\n        lambda: buildCriterionLambda(criterion, arithmeticHelper)\n      };\n    }\n  }, {\n    key: \"parseCriterion\",\n    value: function parseCriterion(criterion, arithmeticHelper) {\n      if (typeof criterion === 'number' || typeof criterion === 'boolean') {\n        return buildCriterion(CriterionType.EQUAL, criterion);\n      } else if (typeof criterion === 'string') {\n        var regexResult = ANY_CRITERION_REGEX.exec(criterion);\n        var criterionValue;\n        var criterionType;\n\n        if (regexResult) {\n          criterionType = StrToCriterionType(regexResult[1]);\n          criterionValue = regexResult[2];\n        } else {\n          criterionType = CriterionType.EQUAL;\n          criterionValue = criterion;\n        }\n\n        var value = arithmeticHelper.coerceToMaybeNumber(criterionValue);\n        var boolvalue = criterionValue.toLowerCase() === this.trueString ? true : criterionValue.toLowerCase() === this.falseString ? false : undefined;\n\n        if (criterionType === undefined) {\n          return undefined;\n        }\n\n        if (criterionValue === '') {\n          return buildCriterion(criterionType, null);\n        } else if (value === undefined) {\n          if (criterionType === CriterionType.EQUAL || criterionType === CriterionType.NOT_EQUAL) {\n            return buildCriterion(criterionType, boolvalue !== null && boolvalue !== void 0 ? boolvalue : criterionValue);\n          }\n        } else {\n          return buildCriterion(criterionType, getRawValue(value));\n        }\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return CriterionBuilder;\n}();\nvar ANY_CRITERION_REGEX = /([<>=]+)(.*)/;\n\nfunction StrToCriterionType(str) {\n  switch (str) {\n    case '>':\n      return CriterionType.GREATER_THAN;\n\n    case '>=':\n      return CriterionType.GREATER_THAN_OR_EQUAL;\n\n    case '<':\n      return CriterionType.LESS_THAN;\n\n    case '<=':\n      return CriterionType.LESS_THAN_OR_EQUAL;\n\n    case '<>':\n      return CriterionType.NOT_EQUAL;\n\n    case '=':\n      return CriterionType.EQUAL;\n\n    default:\n      return undefined;\n  }\n}\n\nexport var buildCriterionLambda = function buildCriterionLambda(criterion, arithmeticHelper) {\n  switch (criterion.operator) {\n    case CriterionType.GREATER_THAN:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) > 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.GREATER_THAN_OR_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) >= 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.LESS_THAN:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) < 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.LESS_THAN_OR_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) <= 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            if (typeof cellValue === 'number') {\n              return arithmeticHelper.floatCmp(cellValue, criterion.value) === 0;\n            } else if (typeof cellValue === 'string') {\n              if (cellValue === '') {\n                return false;\n              }\n\n              var val = arithmeticHelper.coerceToMaybeNumber(cellValue);\n\n              if (val === undefined) {\n                return false;\n              }\n\n              return arithmeticHelper.floatCmp(val, criterion.value) === 0;\n            } else {\n              return false;\n            }\n          };\n        } else if (typeof criterion.value === 'string') {\n          return arithmeticHelper.eqMatcherFunction(criterion.value);\n        } else if (typeof criterion.value === 'boolean') {\n          return function (cellValue) {\n            return typeof cellValue === 'boolean' && cellValue === criterion.value;\n          };\n        } else {\n          return function (cellValue) {\n            return cellValue === EmptyValue;\n          };\n        }\n      }\n\n    case CriterionType.NOT_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            if (typeof cellValue === 'number') {\n              return arithmeticHelper.floatCmp(cellValue, criterion.value) !== 0;\n            } else if (typeof cellValue === 'string') {\n              if (cellValue === '') {\n                return true;\n              }\n\n              var val = arithmeticHelper.coerceToMaybeNumber(cellValue);\n\n              if (val === undefined) {\n                return true;\n              }\n\n              return arithmeticHelper.floatCmp(val, criterion.value) !== 0;\n            } else {\n              return true;\n            }\n          };\n        } else if (typeof criterion.value === 'string') {\n          return arithmeticHelper.neqMatcherFunction(criterion.value);\n        } else if (typeof criterion.value === 'boolean') {\n          return function (cellValue) {\n            return typeof cellValue !== 'boolean' || cellValue !== criterion.value;\n          };\n        } else {\n          return function (cellValue) {\n            return cellValue !== EmptyValue;\n          };\n        }\n      }\n  }\n};","map":{"version":3,"sources":["/Users/mingjie.wang/Documents/Uber/MandA/demo-project/node_modules/hyperformula/es/interpreter/Criterion.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","EmptyValue","getRawValue","CriterionType","buildCriterion","operator","value","CriterionBuilder","config","_a","_b","_c","_d","trueString","translationPackage","getMaybeFunctionTranslation","toLowerCase","falseString","fromCellValue","raw","arithmeticHelper","undefined","criterion","parseCriterion","lambda","buildCriterionLambda","EQUAL","regexResult","ANY_CRITERION_REGEX","exec","criterionValue","criterionType","StrToCriterionType","coerceToMaybeNumber","boolvalue","NOT_EQUAL","str","GREATER_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","cellValue","floatCmp","_cellValue","val","eqMatcherFunction","neqMatcherFunction"],"mappings":"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","sourcesContent":["import \"core-js/modules/es.regexp.exec.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright (c) 2021 Handsoncode. All rights reserved.\n */\nimport { EmptyValue, getRawValue } from './InterpreterValue';\nexport var CriterionType;\n\n(function (CriterionType) {\n  CriterionType[\"GREATER_THAN\"] = \"GREATER_THAN\";\n  CriterionType[\"GREATER_THAN_OR_EQUAL\"] = \"GREATER_THAN_OR_EQUAL\";\n  CriterionType[\"LESS_THAN\"] = \"LESS_THAN\";\n  CriterionType[\"LESS_THAN_OR_EQUAL\"] = \"LESS_THAN_OR_EQUAL\";\n  CriterionType[\"NOT_EQUAL\"] = \"NOT_EQUAL\";\n  CriterionType[\"EQUAL\"] = \"EQUAL\";\n})(CriterionType || (CriterionType = {}));\n\nexport var buildCriterion = function buildCriterion(operator, value) {\n  return {\n    operator: operator,\n    value: value\n  };\n};\nexport var CriterionBuilder = /*#__PURE__*/function () {\n  function CriterionBuilder(config) {\n    _classCallCheck(this, CriterionBuilder);\n\n    var _a, _b, _c, _d;\n\n    this.trueString = (_b = (_a = config.translationPackage.getMaybeFunctionTranslation('TRUE')) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== null && _b !== void 0 ? _b : 'true';\n    this.falseString = (_d = (_c = config.translationPackage.getMaybeFunctionTranslation('FALSE')) === null || _c === void 0 ? void 0 : _c.toLowerCase()) !== null && _d !== void 0 ? _d : 'false';\n  }\n\n  _createClass(CriterionBuilder, [{\n    key: \"fromCellValue\",\n    value: function fromCellValue(raw, arithmeticHelper) {\n      if (typeof raw !== 'string' && typeof raw !== 'boolean' && typeof raw !== 'number') {\n        return undefined;\n      }\n\n      var criterion = this.parseCriterion(raw, arithmeticHelper);\n\n      if (criterion === undefined) {\n        return undefined;\n      }\n\n      return {\n        raw: raw,\n        lambda: buildCriterionLambda(criterion, arithmeticHelper)\n      };\n    }\n  }, {\n    key: \"parseCriterion\",\n    value: function parseCriterion(criterion, arithmeticHelper) {\n      if (typeof criterion === 'number' || typeof criterion === 'boolean') {\n        return buildCriterion(CriterionType.EQUAL, criterion);\n      } else if (typeof criterion === 'string') {\n        var regexResult = ANY_CRITERION_REGEX.exec(criterion);\n        var criterionValue;\n        var criterionType;\n\n        if (regexResult) {\n          criterionType = StrToCriterionType(regexResult[1]);\n          criterionValue = regexResult[2];\n        } else {\n          criterionType = CriterionType.EQUAL;\n          criterionValue = criterion;\n        }\n\n        var value = arithmeticHelper.coerceToMaybeNumber(criterionValue);\n        var boolvalue = criterionValue.toLowerCase() === this.trueString ? true : criterionValue.toLowerCase() === this.falseString ? false : undefined;\n\n        if (criterionType === undefined) {\n          return undefined;\n        }\n\n        if (criterionValue === '') {\n          return buildCriterion(criterionType, null);\n        } else if (value === undefined) {\n          if (criterionType === CriterionType.EQUAL || criterionType === CriterionType.NOT_EQUAL) {\n            return buildCriterion(criterionType, boolvalue !== null && boolvalue !== void 0 ? boolvalue : criterionValue);\n          }\n        } else {\n          return buildCriterion(criterionType, getRawValue(value));\n        }\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return CriterionBuilder;\n}();\nvar ANY_CRITERION_REGEX = /([<>=]+)(.*)/;\n\nfunction StrToCriterionType(str) {\n  switch (str) {\n    case '>':\n      return CriterionType.GREATER_THAN;\n\n    case '>=':\n      return CriterionType.GREATER_THAN_OR_EQUAL;\n\n    case '<':\n      return CriterionType.LESS_THAN;\n\n    case '<=':\n      return CriterionType.LESS_THAN_OR_EQUAL;\n\n    case '<>':\n      return CriterionType.NOT_EQUAL;\n\n    case '=':\n      return CriterionType.EQUAL;\n\n    default:\n      return undefined;\n  }\n}\n\nexport var buildCriterionLambda = function buildCriterionLambda(criterion, arithmeticHelper) {\n  switch (criterion.operator) {\n    case CriterionType.GREATER_THAN:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) > 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.GREATER_THAN_OR_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) >= 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.LESS_THAN:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) < 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.LESS_THAN_OR_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            return typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) <= 0;\n          };\n        } else {\n          return function (_cellValue) {\n            return false;\n          };\n        }\n      }\n\n    case CriterionType.EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            if (typeof cellValue === 'number') {\n              return arithmeticHelper.floatCmp(cellValue, criterion.value) === 0;\n            } else if (typeof cellValue === 'string') {\n              if (cellValue === '') {\n                return false;\n              }\n\n              var val = arithmeticHelper.coerceToMaybeNumber(cellValue);\n\n              if (val === undefined) {\n                return false;\n              }\n\n              return arithmeticHelper.floatCmp(val, criterion.value) === 0;\n            } else {\n              return false;\n            }\n          };\n        } else if (typeof criterion.value === 'string') {\n          return arithmeticHelper.eqMatcherFunction(criterion.value);\n        } else if (typeof criterion.value === 'boolean') {\n          return function (cellValue) {\n            return typeof cellValue === 'boolean' && cellValue === criterion.value;\n          };\n        } else {\n          return function (cellValue) {\n            return cellValue === EmptyValue;\n          };\n        }\n      }\n\n    case CriterionType.NOT_EQUAL:\n      {\n        if (typeof criterion.value === 'number') {\n          return function (cellValue) {\n            if (typeof cellValue === 'number') {\n              return arithmeticHelper.floatCmp(cellValue, criterion.value) !== 0;\n            } else if (typeof cellValue === 'string') {\n              if (cellValue === '') {\n                return true;\n              }\n\n              var val = arithmeticHelper.coerceToMaybeNumber(cellValue);\n\n              if (val === undefined) {\n                return true;\n              }\n\n              return arithmeticHelper.floatCmp(val, criterion.value) !== 0;\n            } else {\n              return true;\n            }\n          };\n        } else if (typeof criterion.value === 'string') {\n          return arithmeticHelper.neqMatcherFunction(criterion.value);\n        } else if (typeof criterion.value === 'boolean') {\n          return function (cellValue) {\n            return typeof cellValue !== 'boolean' || cellValue !== criterion.value;\n          };\n        } else {\n          return function (cellValue) {\n            return cellValue !== EmptyValue;\n          };\n        }\n      }\n  }\n};"]},"metadata":{},"sourceType":"module"}